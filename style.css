/* =========================================
   Glass Skin UI — Cleaned & Enhanced CSS
   (Consolidates duplicates, adds variables,
   and applies consistent glass effects)
========================================= */

/* Google Font */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap');

/* ---------- Tokens ---------- */
:root{
  /* Colors */
  --bg: #f7f9fc;
  --fg: #454f5b;
  --primary: #3b82f6;
  --glass-bg: 255,255,255;         /* base for rgba() */
  --glass-alpha: .18;              /* base glass opacity */
  --glass-stroke: rgba(255,255,255,.55);
  --glass-shadow: 0 10px 30px rgba(31,38,135,.18);
  --chip-bg: rgba(255,255,255,.5);
  --chip-stroke: rgba(255,255,255,.7);
  --chip-fg: #1f2937;
  --muted: #4b5563;

  /* Radii / Blur */
  --radius-xl: 24px;
  --radius-lg: 16px;
  --radius-md: 12px;
  --blur-strong: 18px;
  --blur-med: 12px;

  /* Layout */
  --container-max: 950px;
  --pad: 15px;
}

/* ---------- Reset & Base ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  height:100%;width:100%;
  font-family:'Nunito',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background: var(--bg);
  color: var(--fg);
  display:flex;justify-content:center;align-items:center;
  padding:var(--pad);
}

/* ---------- Container (Glass with graceful fallback) ---------- */
.container{
  width:100%;max-width:var(--container-max);
  border-radius:var(--radius-xl);
  background: rgba(var(--glass-bg), calc(var(--glass-alpha) + .07));
  border:1px solid var(--glass-stroke);
  box-shadow: var(--glass-shadow);
  overflow:hidden;
  /* subtle gradient sheen */
  background-image:
    linear-gradient(135deg, rgba(255,255,255,.28), rgba(255,255,255,.14) 40%, rgba(255,255,255,.10));
  -webkit-backdrop-filter: blur(var(--blur-strong));
  backdrop-filter: blur(var(--blur-strong));
}

/* Fallback if no backdrop support: keep it classy */
@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
  .container{
    background:#ffffff;
    border:1px solid #e6eaf0;
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
  }
}

/* ---------- Welcome Page ---------- */
.welcome-page{padding:40px 20px;text-align:center}
.logo-container{margin-bottom:30px}
.logo{max-width:150px;height:auto}
.search-container{display:flex;justify-content:center;gap:10px}
#welcomeProductCode,
.search-container-result input{
  width:100%;max-width:300px;padding:12px 18px;
  font-size:1rem;outline:none;border-radius:25px;
  border:1px solid rgba(255,255,255,.6);
  background: rgba(var(--glass-bg), .35);
  -webkit-backdrop-filter: blur(var(--blur-med)); backdrop-filter: blur(var(--blur-med));
  color:#1f2937;
}
#welcomeProductCode::placeholder,
.search-container-result input::placeholder{color:var(--muted)}
.search-button{
  padding:12px 25px;border:none;border-radius:25px;cursor:pointer;
  font-size:1rem;font-weight:700;color:#fff;background: var(--primary);
  box-shadow:0 8px 20px rgba(59,130,246,.25);
  transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
}
.search-button:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(59,130,246,.3)}
.search-button:active{transform:translateY(0);opacity:.95}

/* ---------- Result Page (Desktop) ---------- */
.result-page{display:flex;width:100%}
.image-background{
  flex:0 0 45%;
  display:flex;align-items:center;justify-content:center;padding:20px;
  background: rgba(var(--glass-bg), .22);
  border-right:1px solid var(--glass-stroke);
  -webkit-backdrop-filter: blur(var(--blur-med)); backdrop-filter: blur(var(--blur-med));
}
.product-image-desktop{
  width:100%;height:auto;max-height:500px;object-fit:contain;border-radius:var(--radius-lg)
}

#result-page-container .content-overlay{
  flex:1;display:flex;flex-direction:column;padding:25px 30px;gap:18px
}

/* Floating info (desktop): glass card stack */
#result-page-container .floating-info-box{
  display:flex;flex-direction:column;gap:12px;
  background: rgba(var(--glass-bg), .25);
  border:1px solid var(--glass-stroke);
  -webkit-backdrop-filter: blur(var(--blur-med)); backdrop-filter: blur(var(--blur-med));
  border-radius: var(--radius-lg);
  box-shadow: var(--glass-shadow);
  padding:16px;
}

/* Quick text styles in the info box */
#product-location{font-weight:600;color:#111827}
#product-price{font-weight:800;color:#111827;font-size:1.15rem}

/* Size list (desktop) */
#size-list{list-style:none;margin:0;padding:0;display:flex;flex-wrap:wrap;gap:8px}
#size-list li{
  display:flex;align-items:center;justify-content:center;gap:6px;
  padding:6px 10px;font-size:.85rem;font-weight:700;
  background: var(--chip-bg);
  border:1px solid var(--chip-stroke);
  border-radius:10px;color:var(--chip-fg)
}
#size-list .sep{opacity:.6;color:var(--muted)}
#size-list .qty{color: var(--primary)}

/* ---------- Mobile (Glass-First) ---------- */
@media (max-width: 768px){
  html,body{padding:0}
  .container{height:100%;width:100%;border-radius:0;box-shadow:none}

  .result-page{position:relative;height:100%}
  .product-image-desktop{display:none}

  .image-background{
    position:fixed;inset:0;z-index:1;background-size:cover;background-position:center;
    /* Slight dim layer for readability on photos */
  }
  .image-background::after{
    content:"";position:absolute;inset:0;
    background: linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.15) 35%, rgba(0,0,0,.25));
    pointer-events:none;
  }

  .content-overlay{
    position:absolute;inset:0;z-index:3;
    display:flex;flex-direction:column;justify-content:flex-end;padding:12px;
    pointer-events:none;
  }

  /* Glass bar — “Glass Skin” */
  .floating-info-box{
    pointer-events:auto;width:100%;padding:10px;border-radius:var(--radius-lg);
    background: rgba(var(--glass-bg), .28);
    -webkit-backdrop-filter: blur(var(--blur-strong)); backdrop-filter: blur(var(--blur-strong));
    border:1px solid rgba(255,255,255,.55);
    box-shadow: 0 8px 32px rgba(31,38,135,.22);
    display:flex;flex-direction:row;align-items:center;gap:12px;
  }

  .search-container-result{display:flex;gap:8px;flex-grow:1}
  .search-container-result input{
    font-size:.95rem;padding:8px 12px;flex:1;
    background: rgba(255,255,255,.35);
    border:1px solid rgba(255,255,255,.7);
    color:#1f2937;
    -webkit-backdrop-filter: blur(var(--blur-med)); backdrop-filter: blur(var(--blur-med));
  }
  .search-container-result input::placeholder{color:var(--muted)}
  .search-container-result button{font-size:.95rem;padding:8px 14px}

  #product-location,#product-price{
    font-weight:700;color:#111827;white-space:nowrap;text-shadow:none
  }
  #product-location{font-size:.95rem}
  #product-price{font-size:1.15rem}

  #size-list{
    list-style:none;margin:0;padding:0;display:flex;flex-direction:row;gap:6px;flex-wrap:wrap
  }
  #size-list li{
    padding:6px 8px;font-size:.8rem;font-weight:700;
    background: rgba(255,255,255,.5);
    border:1px solid rgba(255,255,255,.7);
    border-radius:8px;color:#1f2937
  }
  #size-list .sep{opacity:.6;color:var(--muted)}
  #size-list .qty{color: var(--primary)}
}

/* ---------- Micro Interactions & A11y ---------- */
:focus-visible{outline:2px dashed var(--primary);outline-offset:2px}
@media (prefers-reduced-motion: reduce){
  *{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}
/* Bỏ lớp phủ để hình ảnh hiển thị rõ */
.image-background::after {
  content: none;
}

/* ===============================
   LAYOUT THEO PHÁC THẢO
   - Left: Product Picture (to)
   - Right (trên): Product Info
   - Right (dưới): Product Location
   - Mobile: chừa chỗ cho bàn phím
================================ */

/* Thêm token cho khoảng trống bàn phím trên mobile */
:root{
  --kb-space: 38vh;           /* chỗ trống bàn phím (có thể chỉnh 32–44vh) */
  --side-col-min: 260px;      /* min-width cột phải desktop */
  --side-col-max: 360px;      /* max-width cột phải desktop */
}

/* ===== Desktop layout bằng CSS Grid ===== */
.result-page{
  display:grid;
  grid-template-columns: 1fr minmax(var(--side-col-min), var(--side-col-max));
  grid-template-rows: 1fr auto;                     /* info trên, location dưới */
  grid-template-areas:
    "image info"
    "image location";
  gap: 18px;
  width:100%;
  padding:24px;
}

.image-background{
  grid-area:image;
  display:flex; align-items:center; justify-content:center;
  padding:20px;
  background: rgba(var(--glass-bg), .22);
  border-right:none;                   /* bỏ viền phải cũ */
  border:1px solid var(--glass-stroke);
  border-radius: var(--radius-lg);
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}

.product-image-desktop{
  width:100%; height:auto; max-height:68vh; object-fit:contain;
  border-radius:var(--radius-lg);
}

/* Ô INFO (trên, bên phải) */
.info-panel{
  grid-area:info;
  display:flex; flex-direction:column; gap:12px;
  background: rgba(var(--glass-bg), .25);
  border:1px solid var(--glass-stroke);
  border-radius: var(--radius-lg);
  box-shadow: var(--glass-shadow);
  padding:16px;
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}

/* Ô LOCATION (dưới, bên phải) */
.location-panel{
  grid-area:location;
  background: rgba(var(--glass-bg), .22);
  border:1px solid var(--glass-stroke);
  border-radius: var(--radius-lg);
  box-shadow: var(--glass-shadow);
  padding:16px;
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}

/* Đồng bộ style text nhanh */
#product-location{font-weight:700;color:#111827}
#product-price{font-weight:800;color:#111827;font-size:1.1rem}

/* ===== Mobile layout + chừa chỗ bàn phím ===== */
@media (max-width: 768px){
  html, body{padding:0}
  .container{height:100%;width:100%;border-radius:0;box-shadow:none}

  /* Lưới 2 cột mảnh (ảnh to bên trái ~65%), và 2 hàng:
     hàng 1: info (phải), hàng 2: location (phải) */
  .result-page{
    display:grid;
    grid-template-columns: 65% 35%;
    grid-template-rows: auto auto;
    grid-template-areas:
      "image info"
      "image location";
    gap:10px;
    height: calc(100vh - var(--kb-space));
    padding:10px;
  }

  .image-background{
    padding:8px;
    border-radius:12px;
    background: rgba(var(--glass-bg), .18);
  }

  .product-image-desktop{display:block; max-height:100%;}

  .info-panel,
  .location-panel{
    padding:10px;
    border-radius:12px;
    background: rgba(var(--glass-bg), .28);
    -webkit-backdrop-filter: blur(var(--blur-strong));
    backdrop-filter: blur(var(--blur-strong));
    border:1px solid rgba(255,255,255,.55);
    box-shadow: 0 8px 24px rgba(31,38,135,.18);
  }

  /* List size gọn hơn */
  #size-list{gap:6px; flex-wrap:wrap}
  #size-list li{
    padding:6px 8px; font-size:.82rem; border-radius:8px
  }

  /* Khoảng trống dành cho bàn phím ở cuối trang */
  .keyboard-spacer{
    height: var(--kb-space);
    width: 100%;
    pointer-events:none;
    /* an toàn với safe-area trên iOS */
    padding-bottom: env(safe-area-inset-bottom);
    background: transparent; /* để trống theo yêu cầu */
  }
}

/* Giữ nguyên tối ưu a11y & motion */
:focus-visible{outline:2px dashed var(--primary);outline-offset:2px}
@media (prefers-reduced-motion: reduce){
  *{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
}

/* Nếu bạn đang dùng lớp phủ ảnh cũ, tắt đi để ảnh rõ trên layout mới */
.image-background::after{content:none !important;}
/* ===== TẮT CUỘN NGANG & DỌC ===== */
html, body {
  overflow: hidden !important;
  height: 100%;
  width: 100%;
  overscroll-behavior: none; /* ngăn kéo cuộn trên mobile */
}

/* Nếu có container chính */
.container {
  overflow: hidden !important;
}

/* Với layout grid, đảm bảo nội dung không tràn */
.result-page {
  overflow: hidden !important;
  max-height: 100vh;
  max-width: 100vw;
}
/* ===== KHÓA VIEWPORT & TẮT CUỘN CHO MOBILE ===== */
html, body {
  height: 100%;
  width: 100%;
  overflow: hidden !important;
  position: fixed;              /* giữ nguyên vị trí */
  top: 0; left: 0;
  overscroll-behavior: none;    /* ngăn bounce scroll trên iOS */
  touch-action: none;           /* ngăn cuộn bằng cử chỉ */
}

/* Nếu có container chính */
.container, .result-page {
  height: 100%;
  width: 100%;
  overflow: hidden !important;
  position: relative;
}

/* Dành cho Safari iOS: giữ nền không bị dời khi bàn phím mở */
@supports (-webkit-touch-callout: none) {
  html, body {
    position: fixed;
    overflow: hidden;
  }
}
/* ===== FIXED VIEWPORT: không cuộn, không co khi mở bàn phím ===== */
html, body {
  margin: 0;
  height: 100%;
  width: 100%;
  overflow: hidden !important;
  overscroll-behavior: none;
  -webkit-text-size-adjust: 100%;
}

/* iOS: dùng 100svh để tránh vh thay đổi khi bật keyboard */
:root { --vh: 100svh; }

/* Sân khấu cố định toàn màn hình */
#stage {
  position: fixed;
  inset: 0;
  height: var(--vh);
  width: 100vw;
  padding: 24px;                      /* viền đẹp như screenshot */
  padding-top: calc(24px + env(safe-area-inset-top));
  padding-bottom: calc(24px + env(safe-area-inset-bottom));
  background: var(--bg);
  overflow: hidden;
}

/* Hai khối cố định như hình */
.image-background {
  position: fixed;
  left: 24px;
  top: 50%;
  transform: translateY(-50%);
  width: calc(100vw - 24px - 24px - 380px - 32px); /* trừ cột phải + gap */
  max-width: 780px;                                /* giới hạn đẹp desktop */
  height: calc(var(--vh) - 48px);                  /* trừ padding */
  display: flex; align-items: center; justify-content: center;
  border-radius: 24px;
  background: rgba(var(--glass-bg), .18);
  border: 1px solid var(--glass-stroke);
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}
.product-image-desktop{
  max-height: 100%; max-width: 100%; object-fit: contain; border-radius: 20px;
}

/* Thẻ info bên phải – cố định, không nhảy khi bàn phím mở */
.info-panel {
  position: fixed;
  right: 24px;
  top: 50%;
  transform: translateY(-50%);
  width: 360px;                       /* đúng tỉ lệ thẻ trong ảnh */
  border-radius: 20px;
  background: rgba(var(--glass-bg), .9);
  border: 1px solid var(--glass-stroke);
  box-shadow: 0 20px 40px rgba(31,38,135,.18);
  padding: 16px;
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}

/* Tắt mọi cuộn & cử chỉ kéo */
#stage, .container, .result-page { overflow: hidden !important; }
body, #stage { touch-action: none; }

/* Bỏ các layout mobile cũ để không đổi bố cục */
@media (max-width: 768px){
  .result-page{ display: block !important; }
  .keyboard-spacer{ display: none !important; }
  .floating-info-box{ position: static; } /* nếu còn class cũ */
  .image-background::after{ content: none !important; }
}
/* ===== FIXED 2-COLUMN VIEW + 40% EMPTY SPACE AT BOTTOM ===== */
:root {
  --vh: 100svh;       /* iOS-friendly viewport height */
  --vw: 100svw;
  --gap: 32px;
  --panel-w: 360px;
  --pad: 24px;
  --empty-bottom: 40vh; /* 40% trống cho bàn phím */
}

/* Tắt cuộn, cố định layout */
html, body {
  margin: 0;
  height: 100%;
  width: 100%;
  overflow: hidden !important;
  overscroll-behavior: none;
  -webkit-text-size-adjust: 100%;
  touch-action: none;
}

/* Sân khấu toàn màn hình */
#result-page-container {
  position: fixed;
  inset: 0;
  width: var(--vw);
  height: var(--vh);
  padding: var(--pad);
  padding-top: calc(var(--pad) + env(safe-area-inset-top));
  padding-bottom: calc(var(--pad) + env(safe-area-inset-bottom));
  background: var(--bg);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* Lưới 2 cột cố định (ảnh trái - info phải) */
.result-page {
  display: grid;
  grid-template-columns: 1fr var(--gap) var(--panel-w);
  grid-template-rows: 1fr;
  align-items: center;
  width: 100%;
  height: calc(100% - var(--empty-bottom)); /* giữ 40% trống ở dưới */
  overflow: hidden;
}

/* Ảnh sản phẩm bên trái */
.image-background {
  grid-column: 1 / 2;
  grid-row: 1;
  height: 100%;
  border-radius: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(var(--glass-bg), .18);
  border: 1px solid var(--glass-stroke);
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
  overflow: hidden;
}

.product-image-desktop {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 20px;
}

/* Thông tin bên phải */
.content-overlay {
  all: unset;
  grid-column: 3 / 4;
  grid-row: 1;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.floating-info-box {
  width: var(--panel-w);
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid var(--glass-stroke);
  box-shadow: 0 20px 40px rgba(31, 38, 135, 0.18);
  padding: 16px;
  -webkit-backdrop-filter: blur(var(--blur-med));
  backdrop-filter: blur(var(--blur-med));
}

/* Ngăn layout mobile cũ */
@media (max-width: 768px) {
  .content-overlay,
  .floating-info-box {
    position: static !important;
    all: unset !important;
  }
  .image-background::after {
    content: none !important;
  }
}
/* ==== FIX: Result page luôn full màn (bỏ max-width 950px) ==== */
#result-page-container{
  position: fixed !important;
  inset: 0 !important;
  z-index: 10 !important;
  width: 100svw !important;
  height: 100svh !important;
  max-width: none !important;     /* << bỏ giới hạn 950px */
  padding: 24px !important;
  padding-top: calc(24px + env(safe-area-inset-top)) !important;
  padding-bottom: calc(24px + env(safe-area-inset-bottom)) !important;
  background: var(--bg) !important;
  overflow: hidden !important;
}

/* Chừa 40% đáy trống, lưới 2 cột luôn nằm ngang */
#result-page-container .result-page{
  display: grid !important;
  grid-template-columns: minmax(0,1fr) 32px 360px !important;
  grid-template-rows: 1fr !important;
  align-items: center !important;
  height: calc(100svh - 40svh) !important;  /* 60% trên */
  width: 100% !important;
  overflow: hidden !important;
  padding: 0 !important;
}

/* Cột trái: stretch hết cột, không bị bóp/đẩy */
#result-page-container .image-background{
  grid-column: 1 / 2 !important;
  grid-row: 1 !important;
  min-width: 0 !important;          /* cho phép co giãn đúng */
  align-self: stretch !important;
  justify-self: stretch !important;
  height: 100% !important;
  border-radius: 24px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  overflow: hidden !important;
  background: rgba(var(--glass-bg), .18) !important;
  border: 1px solid var(--glass-stroke) !important;
}
#result-page-container .image-background::after{ content:none !important; }
#result-page-container .product-image-desktop{
  display: block !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: contain !important;
  border-radius: 20px !important;
}

/* Panel phải */
#result-page-container .content-overlay{
  all: unset !important;
  grid-column: 3 / 4 !important;
  grid-row: 1 !important;
  height: 100% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}
#result-page-container .floating-info-box{
  width: min(100%, 360px) !important;
  border-radius: 20px !important;
  background: rgba(255,255,255,.92) !important;
  border: 1px solid var(--glass-stroke) !important;
  box-shadow: 0 20px 40px rgba(31,38,135,.18) !important;
  padding: 16px !important;
}

/* Không cuộn & không tràn ngang */
html, body, #result-page-container, .result-page{ 
  overflow: hidden !important; 
}

